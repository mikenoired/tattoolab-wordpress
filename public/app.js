!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=4)}([function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=["webkit"],s=function(){function e(t,n,r){i(this,e),this.callback=r||null,this.container=t,this.image=this.container.querySelector(n)||this.container.querySelector("img"),this.gradientData=[],this.image&&this.container&&(this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.imageDimensions={width:0,height:0},this.imageData=[],this.readImage())}return r(e,[{key:"readImage",value:function(){this.imageDimensions.width=.1*this.image.width,this.imageDimensions.height=.1*this.image.height,this.render()}},{key:"getImageData",value:function(){var e=this.ctx.getImageData(0,0,this.imageDimensions.width,this.imageDimensions.height).data;this.imageData=Array.from(e)}},{key:"getChunkedImageData",value:function(){return this.imageData.reduce(function(e,t,n){var i=Math.floor(n/4);return e[i]||(e[i]=[]),e[i].push(t),e},[]).filter(function(e){return e.slice(0,2).every(function(e){return e<250})&&e.slice(0,2).every(function(e){return e>0})})}},{key:"getRGBAGradientValues",value:function(e){return e.map(function(e,t){return"rgb("+e.rgba.slice(0,3).join(",")+") "+(0==t?"0%":"75%")}).join(",")}},{key:"getCSSGradientProperty",value:function(e){var t=this.getRGBAGradientValues(e);return a.map(function(e){return"background-image: -"+e+"-linear-gradient(\n                        135deg,\n                        "+t+"\n                    )"}).concat(["background-image: linear-gradient(\n                    135deg,\n                    "+t+"\n                )"]).join(";")}},{key:"getMiddleRGB",value:function(e,t){var n=0,i=(n+1)/2,r=1-i;return[parseInt(e[0]*i+t[0]*r),parseInt(e[1]*i+t[1]*r),parseInt(e[2]*i+t[2]*r)]}},{key:"getSortedValues",value:function(e){return Object.keys(e).map(function(t){var n=t,i=t.split("|"),r=(299*i[0]+587*i[1]+114*i[2])/1e3;return{rgba:n.split("|"),occurs:e[t],brightness:r}}).sort(function(e,t){return e.occurs-t.occurs}).reverse().slice(0,10).sort(function(e,t){return e.brightness-t.brightness}).reverse()}},{key:"getTextProperty",value:function(e){var t=this.getMiddleRGB(e[0].rgba.slice(0,3),e[1].rgba.slice(0,3));return Math.round((299*parseInt(t[0])+587*parseInt(t[1])+114*parseInt(t[2]))/1e3)>125?"color: #000":"color: #fff"}},{key:"getTopValues",value:function(e){var t=this.getSortedValues(e);return[t[0],t[t.length-1]]}},{key:"getUniqValues",value:function(e){return e.reduce(function(e,t){var n=t.join("|");return e[n]?(e[n]=++e[n],e):(e[n]=1,e)},{})}},{key:"renderGradient",value:function(){var e=window.localStorage,t="grade-"+this.image.getAttribute("src"),n=null;if(e&&e.getItem(t))n=JSON.parse(e.getItem(t));else{var i=this.getChunkedImageData();n=this.getTopValues(this.getUniqValues(i)),e&&e.setItem(t,JSON.stringify(n))}if(this.callback)return void(this.gradientData=n);var r=this.getCSSGradientProperty(n),a=this.getTextProperty(n),s=(this.container.getAttribute("style")||"")+"; "+r+"; "+a;this.container.setAttribute("style",s)}},{key:"render",value:function(){this.canvas.width=this.imageDimensions.width,this.canvas.height=this.imageDimensions.height,this.ctx.drawImage(this.image,0,0,this.imageDimensions.width,this.imageDimensions.height),this.getImageData(),this.renderGradient()}}]),e}();e.exports=function(e,t,n){var i=function(e,t,n){var i=new s(e,t,n),r=i.gradientData;return r.length?{element:e,gradientData:r}:null},r=(NodeList.prototype.isPrototypeOf(e)?Array.from(e).map(function(e){return i(e,t,n)}):[i(e,t,n)]).filter(Boolean);if(r.length)return n(r)}},function(e,t){},function(e,t){e.exports="data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSAiaW1nL2xvZ28uc3ZnIjs="},function(e,t){e.exports="data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSAiaW1nL3N2Zy1pY29ucy5zdmciOw=="},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=n(0),a=i(r);n(1),n(3),n(2),window.onscroll=function(){var e=window.pageYOffset/2;document.body.style.backgroundPosition="left -"+e+"px"},window.addEventListener("load",function(){(0,a.default)(document.querySelectorAll("header"))})}]);